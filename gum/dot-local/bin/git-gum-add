#!/usr/bin/env bash
set -euo pipefail

git status --porcelain=1 |\
	grep '^.\S' |\
	gum choose \
		--header='Changes not staged for commit:' \
		--ordered \
		--selected-prefix='+ ' \
		--no-limit \
		--cursor.foreground='15' \
		--item.foreground="$(git config get --default=1 color.status.changed)" \
		--selected.foreground="$(git config get --default=2 color.status.added)" |\
	awk '{print $NF}' |\
	xargs --no-run-if-empty git add
